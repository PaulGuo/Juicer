<!DOCTYPE HTML>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title></title>
	<script type="text/javascript" src="../src/juicer.js"></script>
</head>
<body>
	<script id="tpl" type="text/template">
        <ul>
            {@each list as it,index}
                <li>${index}:<a href="s?wd=${:it.corp}">${it.name}</a></li>
            {@/each}
            {@each blah as it}
                <li>
                    num: ${it.num} <br />
                    {@if it.num}
                        {@each it.inner as ct}
                            ${ct.time} ${=ct.task} <br />
                        {@/each}
                    {@/if}
                </li>
            {@/each}
            {@each i in range(5, 10)}
                ${i}
            {@/each}
        </ul>
    </script>
	<script type="text/javascript">
		var data = {
	        list: [
	            {name:' guokai', show: true, corp: '淘宝'},
	            {name:' benben', show: false, corp: '百度'},
	            {name:' dierbaby', show: true}
	        ],
	        blah: [
	            {num: 1},
	            {num: 2},
	            {num: 3, 
	                inner:[
	                    {'time': '15:00'},
	                    {'time': '16:00', task: "<em>提醒</em>"},
	                    {'time': '17:00'},
	                    {'time': '18:00'}
	                ]
	            },
	            {num: 4}
	        ]
	    };

		var tpl = document.getElementById('tpl').innerHTML;

		var inc=function(n) {
			return n+1;
		};

		var starttimestamp=new Date().getTime();

		juicer.set('cache',false);
		juicer.set('errorhandling',false);
		juicer.set('strip',true);
		juicer.set('detection',false);

		for(var i=0;i<5000;i++) {
			juicer(tpl,data);
		}

		var endtimestamp=new Date().getTime();
		var exhausttime=endtimestamp-starttimestamp;

		document.write(juicer(tpl,data));
		document.write('渲染5000次: '+exhausttime + '毫秒');

		console.log(juicer(tpl).render.toString());
		console.log(exhausttime);
	</script>
</body>
</html>
